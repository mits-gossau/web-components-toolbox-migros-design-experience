# Design Tokens

Design tokens and style configuration for multiple products as part of a design system.

We use the [Figma Tokens Plugin from Jan Six](https://docs.tokens.studio/) to get the tokens. The Gitlab Repository stores the Design Tokens and in this case is the single source of truth. More information about Gitlab Syncing can be found on <https://docs.tokens.studio/sync/gitlab>.

For the token transformation we are using [Style Dictionary from Amazon](https://amzn.github.io/style-dictionary/#/). Style Dictionary creates multiple configurations (e.g. CSS-Variables).

## Getting Started

```bash
npm install
npm run build
```

Further tasks for linting and testing you can find in the [package.json](package.json).

## Usage

You can get your Design Tokens via the private [@migros/mdx-design-tokens NPM Package](https://repository.migros.net/#browse/browse:MigrosNPMPrivate:%40migros%2Fmdx-design-tokens). The output is separated in brand folders.

### CSS

#### Importing the CSS

Here an example in CSS

```css
@import '@migros/mdx-design-tokens/dist/css/03_component/brands/[BRAND]/light-rem.css';
@import '@migros/mdx-design-tokens/dist/css/03_component/brands/[BRAND]/light-px.css';
```

Here an example in Next.js (inside your Layout.tsx file)

```javascript
import '@migros/mdx-design-tokens/dist/css/03_component/brands/[BRAND]/light-rem.css';
```

#### Using the CSS

You are probably already familiar with CSS custom properties being defined in `:root` something like this:

```css
:root {
  --mdx-sys-color-primary-default: rgb(255, 148, 76);
}
```

The css custom properties for the design tokens are however wrapped inside a theme class (e.g. `.migros--light`). This means you have to explicitly add that class to your html.

```html
<html lang="en" className="migros--light"></html>
```

Then use one of the tokens and apply it to an element. Here a simple example in Next.js.

```jsx
<html lang="en" className="migros--light">
  <body>
    <p style={{ color: 'var(--mdx-sys-color-primary-default)' }}>My text is using the MDX primary color</p>
  </body>
</html>
```

Replace `.migros--light` with the class name of your brand.

#### Recommendations

The themes for a brand consist of system (sys) and component level tokens. We don't recommend using base level tokens.

### Tailwind

We support the platform **Tailwind** out of the box. To work properly you need the **css sys tokens output of your brand** (see [CSS](#css)) and **the generated tailwind preset**. The custom properties are referenced in the tailwind preset. With that setup we enable theming and can use synergies with other setups.

#### Getting Started

Import the sys design tokens in your css:

```css
@import '@migros/mdx-design-tokens/dist/css/02_system/brands/[BRAND]/light-rem.css';
```

Then look for the tailwind preset and add it in your `tailwind.config.js`. Always add it as the first preset so that you have the possibility to overwrite it:

```js
// tailwind.config.js
module.exports = {
  presets: [require('@migros/mdx-design-tokens/dist/tailwind/02_system/brands/[BRAND]/[BRAND]-rem.preset.js')],
};
```

#### Preset Structure

Tailwind has the possibility to overwrite or extend existing configuration. We try to get the best output for consistency in our design system and also to support existing key properties in tailwind. Here an example of the logic behind it:

```js
/** @type {import('tailwindcss').Config} */
module.exports = {
  presets: [
    {
      // this will be a brand preset generated in MDX
      theme: {
        colors: {}, // here we remove all existing default config from tailwind
        extend: {
          colors: {
            // then we extend the theme with our new values
            primary: 'red',
            secondary: 'tomato',
          },
        },
      },
    },
    // if you add another preset here, you can extend/overwrite the first preset
  ],
  theme: {
    // another possibility is to extend/overwrite the preset directly in your config
    colors: {
      secondary: 'gold',
    },
    extend: {
      colors: {
        primary: 'blue',
      },
    },
  },
};
```

Here is a screenshot of the output from the [tailwind playground](https://play.tailwindcss.com/8caYyB5iCM?file=config):

![Tailwind Theme Structure](./docs/tailwind-structure.png 'Logic of tailwind extending themes')

With that in mind we structure our output as follow:

##### Overwrite (tailwind) default configuration:

- colors
- borderWidth
- boxShadow
- screens (breakpoints)
- spacing

##### Extend (tailwind) configuration:

- sizing
- borderRadius
- font
- motion

**Useful Links**:

- <https://tailwindcss.com/docs/theme>
- <https://tailwindcss.com/docs/presets>

## Credits

Strongly inspired by <https://github.com/brandcodeapp/headless-ds-tokens/>
