{"version":3,"names":["CHAR_SIZE","FilterSelect","this","recalculateButtonLabel","debounce","recalculateButtonLabelFn","bind","handleClick","selectedOptions","onWindowResize","componentDidRender","length","displayedLabel","label","badge","buttonLabel","_c","_b","_a","host","shadowRoot","querySelector","width","clientWidth","displayedLabels","push","join","toString","render","h","buttonAriaLabel","clearButtonAriaLabel","open","text"],"sources":["src/components/filter/filter-select/filter-select.tsx"],"sourcesContent":["import { Component, Element, Listen, Prop, h } from '@stencil/core';\nimport { debounce } from '../../../utils/defer';\n\nconst CHAR_SIZE = 8;\n\n@Component({\n  tag: 'mdx-filter-select',\n  shadow: true,\n})\nexport class FilterSelect {\n  @Prop()\n  displayedLabel: string;\n\n  @Prop()\n  badge: string;\n\n  @Element()\n  host: HTMLMdxFilterSelectElement;\n\n  @Prop({ reflect: true })\n  label!: string;\n\n  @Prop()\n  selectedOptions: string[];\n\n  @Prop()\n  clearButtonAriaLabel?: string;\n\n  @Prop()\n  buttonAriaLabel?: string;\n\n  @Prop({ reflect: true })\n  open?: boolean;\n\n  @Listen('selectClear', { capture: true })\n  handleClick() {\n    this.selectedOptions = [];\n  }\n\n  @Listen('resize', { capture: true, target: 'window' })\n  onWindowResize() {\n    this.recalculateButtonLabel();\n  }\n\n  componentDidRender() {\n    this.recalculateButtonLabelFn();\n  }\n\n  private recalculateButtonLabel = debounce(this.recalculateButtonLabelFn.bind(this), 100);\n  private recalculateButtonLabelFn() {\n    if (this.selectedOptions && this.selectedOptions.length === 0) {\n      this.displayedLabel = this.label;\n      this.badge = '';\n      return;\n    }\n\n    const buttonLabel = this.host.shadowRoot\n      ?.querySelector('mdx-filter-select-button')\n      ?.shadowRoot?.querySelector('.filter-select-button__button-label');\n    let width = buttonLabel ? buttonLabel.clientWidth - 20 : 100;\n\n    const displayedLabels: string[] = [];\n    while (width > 0) {\n      if (\n        this.selectedOptions[displayedLabels.length] &&\n        (this.selectedOptions[displayedLabels.length].length + 2) * CHAR_SIZE < width\n      ) {\n        width -= (this.selectedOptions[displayedLabels.length].length + 2) * CHAR_SIZE;\n        displayedLabels.push(this.selectedOptions[displayedLabels.length]);\n      } else {\n        break;\n      }\n    }\n\n    this.displayedLabel = displayedLabels.join(', ') + (displayedLabels.length < this.selectedOptions.length ? ', ...' : '');\n    this.badge =\n      displayedLabels.length < this.selectedOptions.length\n        ? '+' + (this.selectedOptions.length - displayedLabels.length).toString()\n        : '';\n  }\n\n  render() {\n    return this.selectedOptions.length > 0 ? (\n      <mdx-filter-select-button\n        badge={this.badge}\n        label={this.displayedLabel}\n        buttonAriaLabel={this.buttonAriaLabel}\n        clearButtonAriaLabel={this.clearButtonAriaLabel}\n      />\n    ) : (\n      <mdx-select-button open={this.open} text={this.label} />\n    );\n  }\n}\n"],"mappings":"sFAGA,MAAMA,EAAY,E,MAMLC,EAAY,M,yBAuCfC,KAAAC,uBAAyBC,EAASF,KAAKG,yBAAyBC,KAAKJ,MAAO,K,8LAbpF,WAAAK,GACEL,KAAKM,gBAAkB,E,CAIzB,cAAAC,GACEP,KAAKC,wB,CAGP,kBAAAO,GACER,KAAKG,0B,CAIC,wBAAAA,G,UACN,GAAIH,KAAKM,iBAAmBN,KAAKM,gBAAgBG,SAAW,EAAG,CAC7DT,KAAKU,eAAiBV,KAAKW,MAC3BX,KAAKY,MAAQ,GACb,M,CAGF,MAAMC,GAAcC,GAAAC,GAAAC,EAAAhB,KAAKiB,KAAKC,cAAU,MAAAF,SAAA,SAAAA,EACpCG,cAAc,+BAA2B,MAAAJ,SAAA,SAAAA,EACzCG,cAAU,MAAAJ,SAAA,SAAAA,EAAEK,cAAc,uCAC9B,IAAIC,EAAQP,EAAcA,EAAYQ,YAAc,GAAK,IAEzD,MAAMC,EAA4B,GAClC,MAAOF,EAAQ,EAAG,CAChB,GACEpB,KAAKM,gBAAgBgB,EAAgBb,UACpCT,KAAKM,gBAAgBgB,EAAgBb,QAAQA,OAAS,GAAKX,EAAYsB,EACxE,CACAA,IAAUpB,KAAKM,gBAAgBgB,EAAgBb,QAAQA,OAAS,GAAKX,EACrEwB,EAAgBC,KAAKvB,KAAKM,gBAAgBgB,EAAgBb,Q,KACrD,CACL,K,EAIJT,KAAKU,eAAiBY,EAAgBE,KAAK,OAASF,EAAgBb,OAAST,KAAKM,gBAAgBG,OAAS,QAAU,IACrHT,KAAKY,MACHU,EAAgBb,OAAST,KAAKM,gBAAgBG,OAC1C,KAAOT,KAAKM,gBAAgBG,OAASa,EAAgBb,QAAQgB,WAC7D,E,CAGR,MAAAC,GACE,OAAO1B,KAAKM,gBAAgBG,OAAS,EACnCkB,EAAA,4BACEf,MAAOZ,KAAKY,MACZD,MAAOX,KAAKU,eACZkB,gBAAiB5B,KAAK4B,gBACtBC,qBAAsB7B,KAAK6B,uBAG7BF,EAAA,qBAAmBG,KAAM9B,KAAK8B,KAAMC,KAAM/B,KAAKW,O"}