{"version":3,"names":["CHAR_SIZE","FilterSelect","this","recalculateButtonLabel","debounce","recalculateButtonLabelFn","bind","handleClick","selectedItems","onWindowResize","componentDidRender","length","displayedLabel","label","badge","buttonLabel","_c","_b","_a","host","shadowRoot","querySelector","width","clientWidth","displayedLabels","currentItem","push","join","toString","connectedCallback","parseAttribute","render","h","clearButtonAriaLabel","open","text"],"sources":["src/components/filter/filter-select/filter-select.tsx"],"sourcesContent":["import { Component, Element, Listen, Prop, h } from '@stencil/core';\nimport { debounce, parseAttribute } from '../../../utils';\n\nconst CHAR_SIZE = 8;\n\n@Component({\n  tag: 'mdx-filter-select',\n  shadow: true,\n})\nexport class FilterSelect {\n  @Prop()\n  displayedLabel: string;\n\n  @Prop()\n  badge: string;\n\n  @Element()\n  host: HTMLMdxFilterSelectElement;\n\n  @Prop({ reflect: true })\n  label!: string;\n\n  @Prop()\n  selectedItems: string[];\n\n  @Prop()\n  clearButtonAriaLabel?: string;\n\n  @Prop({ reflect: true })\n  open?: boolean;\n\n  @Listen('selectClear', { capture: true })\n  handleClick() {\n    this.selectedItems = [];\n  }\n\n  @Listen('resize', { capture: true, target: 'window' })\n  onWindowResize() {\n    this.recalculateButtonLabel();\n  }\n\n  componentDidRender() {\n    this.recalculateButtonLabelFn();\n  }\n\n  private recalculateButtonLabel = debounce(this.recalculateButtonLabelFn.bind(this), 100);\n  private recalculateButtonLabelFn() {\n    if (this.selectedItems && this.selectedItems.length === 0) {\n      this.displayedLabel = this.label;\n      this.badge = '';\n\n      return;\n    }\n\n    const buttonLabel = this.host.shadowRoot\n      ?.querySelector('mdx-filter-select-button')\n      ?.shadowRoot?.querySelector('.filter-select-button__button-label');\n    let width = buttonLabel ? buttonLabel.clientWidth - 20 : 100;\n\n    const displayedLabels: string[] = [];\n    while (width > 0) {\n      const currentItem = this.selectedItems[displayedLabels.length];\n      if (typeof currentItem === 'string' && (currentItem.length + 2) * CHAR_SIZE < width) {\n        width -= (currentItem.length + 2) * CHAR_SIZE;\n        displayedLabels.push(currentItem);\n      } else {\n        break;\n      }\n    }\n\n    this.displayedLabel = displayedLabels.join(', ') + (displayedLabels.length < this.selectedItems.length ? ', ...' : '');\n    this.badge =\n      displayedLabels.length < this.selectedItems.length\n        ? '+' + (this.selectedItems.length - displayedLabels.length).toString()\n        : '';\n  }\n\n  connectedCallback() {\n    this.selectedItems = parseAttribute(this.host, 'selected-items', this.selectedItems);\n  }\n\n  render() {\n    return this.selectedItems.length > 0 ? (\n      <mdx-filter-select-button\n        badge={this.badge}\n        label={this.displayedLabel}\n        clearButtonAriaLabel={this.clearButtonAriaLabel}\n      />\n    ) : (\n      <mdx-select-button open={this.open} text={this.label} />\n    );\n  }\n}\n"],"mappings":"0HAGA,MAAMA,EAAY,E,MAMLC,EAAY,M,yBAoCfC,KAAAC,uBAAyBC,EAASF,KAAKG,yBAAyBC,KAAKJ,MAAO,K,6JAbpF,WAAAK,GACEL,KAAKM,cAAgB,E,CAIvB,cAAAC,GACEP,KAAKC,wB,CAGP,kBAAAO,GACER,KAAKG,0B,CAIC,wBAAAA,G,UACN,GAAIH,KAAKM,eAAiBN,KAAKM,cAAcG,SAAW,EAAG,CACzDT,KAAKU,eAAiBV,KAAKW,MAC3BX,KAAKY,MAAQ,GAEb,M,CAGF,MAAMC,GAAcC,GAAAC,GAAAC,EAAAhB,KAAKiB,KAAKC,cAAU,MAAAF,SAAA,SAAAA,EACpCG,cAAc,+BAA2B,MAAAJ,SAAA,SAAAA,EACzCG,cAAU,MAAAJ,SAAA,SAAAA,EAAEK,cAAc,uCAC9B,IAAIC,EAAQP,EAAcA,EAAYQ,YAAc,GAAK,IAEzD,MAAMC,EAA4B,GAClC,MAAOF,EAAQ,EAAG,CAChB,MAAMG,EAAcvB,KAAKM,cAAcgB,EAAgBb,QACvD,UAAWc,IAAgB,WAAaA,EAAYd,OAAS,GAAKX,EAAYsB,EAAO,CACnFA,IAAUG,EAAYd,OAAS,GAAKX,EACpCwB,EAAgBE,KAAKD,E,KAChB,CACL,K,EAIJvB,KAAKU,eAAiBY,EAAgBG,KAAK,OAASH,EAAgBb,OAAST,KAAKM,cAAcG,OAAS,QAAU,IACnHT,KAAKY,MACHU,EAAgBb,OAAST,KAAKM,cAAcG,OACxC,KAAOT,KAAKM,cAAcG,OAASa,EAAgBb,QAAQiB,WAC3D,E,CAGR,iBAAAC,GACE3B,KAAKM,cAAgBsB,EAAe5B,KAAKiB,KAAM,iBAAkBjB,KAAKM,c,CAGxE,MAAAuB,GACE,OAAO7B,KAAKM,cAAcG,OAAS,EACjCqB,EAAA,4BACElB,MAAOZ,KAAKY,MACZD,MAAOX,KAAKU,eACZqB,qBAAsB/B,KAAK+B,uBAG7BD,EAAA,qBAAmBE,KAAMhC,KAAKgC,KAAMC,KAAMjC,KAAKW,O"}